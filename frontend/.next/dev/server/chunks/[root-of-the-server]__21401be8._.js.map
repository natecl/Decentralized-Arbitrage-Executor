{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/n.chinlue/Decentralized-Arbitrage-Executor/frontend/pages/api/prices.js"],"sourcesContent":["// pages/api/prices.js\nimport axios from \"axios\";\nimport { ethers } from \"ethers\";\n\nconst provider = new ethers.providers.JsonRpcProvider(process.env.RPC_URL);\nconst UNISWAP_PAIR_ADDRESS = process.env.NEXT_PUBLIC_UNISWAP_PAIR_ADDRESS;\nconst UNISWAP_PAIR_ABI = [\"function getReserves() view returns (uint112, uint112, uint32)\",\"function token0() view returns (address)\",\"function token1() view returns (address)\"];\n\nexport default async function handler(req, res) {\n  try {\n    const [bin, cb, ku] = await Promise.all([\n      axios.get(\"https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT\"),\n      axios.get(\"https://api.coinbase.com/v2/prices/ETH-USD/spot\"),\n      axios.get(\"https://api.kucoin.com/api/v1/market/orderbook/level1?symbol=ETH-USDT\")\n    ]);\n\n    let dex = null;\n    try {\n      if (UNISWAP_PAIR_ADDRESS) {\n        const pair = new ethers.Contract(UNISWAP_PAIR_ADDRESS, UNISWAP_PAIR_ABI, provider);\n        const r = await pair.getReserves();\n        dex = Number(r[1]) / Number(r[0]);\n      }\n    } catch (e) { /* ignore */ }\n\n    res.status(200).json({\n      binance: parseFloat(bin.data.price),\n      coinbase: parseFloat(cb.data.data.amount),\n      kucoin: parseFloat(ku.data.data.price),\n      dex: dex || parseFloat(cb.data.data.amount)\n    });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: err.message });\n  }\n}\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;AACtB;AACA;;;;;;;;AAEA,MAAM,WAAW,IAAI,sHAAM,CAAC,SAAS,CAAC,eAAe,CAAC,QAAQ,GAAG,CAAC,OAAO;AACzE,MAAM,uBAAuB,QAAQ,GAAG,CAAC,gCAAgC;AACzE,MAAM,mBAAmB;IAAC;IAAiE;IAA2C;CAA2C;AAElK,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI;QACF,MAAM,CAAC,KAAK,IAAI,GAAG,GAAG,MAAM,QAAQ,GAAG,CAAC;YACtC,qHAAK,CAAC,GAAG,CAAC;YACV,qHAAK,CAAC,GAAG,CAAC;YACV,qHAAK,CAAC,GAAG,CAAC;SACX;QAED,IAAI,MAAM;QACV,IAAI;YACF,IAAI,sBAAsB;gBACxB,MAAM,OAAO,IAAI,sHAAM,CAAC,QAAQ,CAAC,sBAAsB,kBAAkB;gBACzE,MAAM,IAAI,MAAM,KAAK,WAAW;gBAChC,MAAM,OAAO,CAAC,CAAC,EAAE,IAAI,OAAO,CAAC,CAAC,EAAE;YAClC;QACF,EAAE,OAAO,GAAG,CAAe;QAE3B,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YACnB,SAAS,WAAW,IAAI,IAAI,CAAC,KAAK;YAClC,UAAU,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM;YACxC,QAAQ,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK;YACrC,KAAK,OAAO,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM;QAC5C;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC;IAC5C;AACF"}}]
}